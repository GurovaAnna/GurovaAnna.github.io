$(function(){function e(e){var t=$("#news_header").html();t=_.template(t),$(".news_result").append(t({data:e.response})),1===parseInt($(".news_page_number").val(),10)&&$(".js_prev_btn").attr("disabled","disabled"),parseInt($(".news_page_number").val(),10)===e.response.pages&&$(".js_next_btn").attr("disabled","disabled")}function t(e){var t=$("#news_content").html();t=_.template(t),o.next().append(t({data:e.response.results[0]})),o.next().slideToggle()}function n(){var e=$("#error").html();e=_.template(e),$(".news_result").append(e())}function a(t){$(".news_result").empty(),t?$.ajax({type:"GET",url:l+"&page="+t,contentType:"application/json; charset=utf-8",success:e,error:n}):$.ajax({type:"GET",url:l,contentType:"application/json; charset=utf-8",success:e,error:n})}function s(e){""===o.next().html().trim()?$.ajax({type:"GET",url:l+"&show-blocks=body&ids="+e,contentType:"application/json; charset=utf-8",success:t}):o.next().slideToggle()}function r(){a(parseInt($(".news_page_number").val(),10)+1)}function p(){a(parseInt($(".news_page_number").val(),10)-1)}function c(e){var t=$(this).val();t=t.replace(/[^0-9]/g,""),$(this).val(t),13==e.keyCode&&(e.preventDefault(),a(parseInt($(".news_page_number").val(),10)))}var o,l="http://content.guardianapis.com/search?api-key=test";$(".js_refresh_btn").on("click",function(){a()}),$(document).on("click",".news_item_header",function(){o=$(this),o.toggleClass("active"),s(o.attr("data-id"))}),$(document).on("click",".js_prev_btn",p),$(document).on("click",".js_next_btn",r),$(document).on("keyup",".news_page_number",c),a()});